# _cpu_

#### 冯诺依曼体系结构有以下特点：

1. 计算机处理的数据和指令一律用二进制数表示；
2. 指令和数据不加区别混合存储在同一个存储器中；
3. 顺序执行程序的每一条指令；
4. 计算机硬件由运算器、控制器、存储器、输入设备和输出设备五大部分组成。

##### 冯诺依曼体系结构的计算机必须具有如下功能：

* 把需要的程序和数据送至计算机中；
* 必须具有长期记忆程序、数据、中间结果及最终运算结果的能力；
* 能够完成各种算术、逻辑运算和数据传送等数据加工处理的能力；
* 能够根据需要控制程序走向，并能根据指令控制机器的各部件协调操作；
* 能够按照要求将处理结果输出给用户。

![](blob:file:///45ec0e69-3c82-4b64-b29d-607e1a15d9ca)

CPU的两个主要组成是控制器和运算器，当然新型的CPU也集成了高速缓存和浮点处理器等部件。控制器是整个系统的指挥中心，控制运算器，存储器和输入输出设备的工作情况，它主要包括程序计数器（PC）、指令寄存器（IR）、指令译码器（ID）、时序发生器和操作控制器。

现代CPU的缓存结构一般分三层，L1，L2和L3。如下图所示：级别越小的缓存，越接近CPU， 意味着速度越快且容量越少。

L1是最接近CPU的，它容量最小，速度最快，每个核上都有一个L1 Cache\(准确地说每个核上有两个L1 Cache， 一个存数据 L1d Cache， 一个存指令 L1i Cache\)；

L2 Cache 更大一些，例如256K，速度要慢一些，一般情况下每个核上都有一个独立的L2 Cache；

L3 Cache是三级缓存中最大的一级，例如12MB，同时也是最慢的一级，在同一个CPU插槽之间的核共享一个L3 Cache。

![](/assets/importcuc.png)

# 计算机工作原理 {#22-计算机工作原理}

对于我们现代计算机来说，最关键的2个部件就是CPU和内存。内存存储了要执行的程序指令，而CPU就是用来执行这些指令。CPU首先要知道这些指定存放在存储器的那个区域，然后才能执行，并且把执行的结果写入到执行区域。

### CPU指令 {#221-cpu指令和编程语言}

因为在计算机中指令和数据都用二进制来表示，也就是说它只认识0和1这样的数字。最早期的计算机程序通过在纸带上打洞来人工操操作的方式来模拟0和1，根据不同的组合来完成一些操作。后来直接通过0和1编程程序，这种称之为机器语言,CPU指令其实就对应了我们这里说的0和1的一些组合,

每款CPU在设计时就规定了一系列与其硬件电路相配合的指令系统。有了CPU指令集的文档你就可以通过这个编写CPU认识的机器代码了。所以对于不同CPU来说可能会有不同的机器码。比如下面我们就定义了一套我们CPU硬件电路可以完成的CPU指令。![](/assets/importzhiling.png)

### 编程语言

使用0和1这样的机器语言好处是CPU认识，可以直接执行，但是对于程序本身来说，没有可读性，难以维护，容易出错。所以就出现了**汇编语言**，它用助记符\(代替操作码指令，用地址符号代替地址码。实际是对机器语言的一种映射，可读性高。![](/assets/import汇编.png)把汇编语言转换为机器语言需要一个叫做**汇编器**的工具。对于目前的CPU厂商，在推出的CPU指令时都会同时退出新的汇编器。如果你还在使用老版本的汇编器那么只能使用机器码来使用新的指令了

#### CPU工作流程 {#2223-cpu工作流程}

### CPU与线程关系



